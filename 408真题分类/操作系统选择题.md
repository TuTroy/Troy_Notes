

# 2009

## 22

![image-20231016164740056](images/image-20231016164740056.png)



看到外部优先想到CPU外部可能会产生的中断

异常(内中断)--CPU内部--终止异常和外中断是硬件中断

![image-20231016165409453](images/image-20231016165409453.png)

中断(外中断) CPU外部

- 可屏蔽中断

  - Cache缺失

  - I/O中断：键盘输入，打印机缺纸

  - 时钟中断

  - I/O中断请求

- 不可屏蔽中断

  - 通常是非常紧急的硬件故障，如电源掉电等



## 23

并行：同一时刻

并发：同一时间 宏观

## 24

![image-20231016165055513](images/image-20231016165055513.png)



响应比=(等待时间+要求服务时间)/要求服务时间

![image-20231016174106777](images/image-20231016174106777.png)

带权周转时间>1



## 25

2x+1+资源m ==》 x就是最少个数

 

## 26

分配内存主要的保护措施是界地址保护 



## 27

逻辑地址=段号+段长



## 28

文件物理结构(文件在外存上的存储存储)

存储方式：

1. 顺序分配
   - 连续的存储空间-可随机访问
   - 文件头指定起始块的位置和长度
2. 链表分配
   - 隐式链接 -- 通过指针访问
   - 显示链接 -- 把指针放在文件分配表FAT里(在内存中)
3. 索引分配
   - 为每个文件创建索引数据块--存放文件数据块的指针列表-在外存上



## 29

磁盘调度算法：

先来先服务FCFS：按来的顺序访问

最短时间优先SSTF：贪心思想，按照离当前最近的访问，可能不是最优的

电梯算法SCAN：朝向一个方向移动访问，到边缘之后在掉头访问未访问的。LOOK--不需要到最边缘的点

C循环扫描算法C-SCAN：移动到边缘之后，直接从另一边开头重新访问。C-LOOK -- 不需要到最边缘的点，

LOOK -- 不需要到最边缘只需要到最远的一个需要访问的点



## 30

文件控制块FCB

- 基本信息
  - 文件名、文件的物理位置、文件的逻辑结构、文件的物理结构
- 存取控制信息
  - 存取权限
- 使用信息
  - 建立时间，修改时间



## 31

刚开始文件F1的 count=1 F1--物理块count=1

F2为软链接 相当于复制物理块的信息此时count=1

F3为硬链接 此时物理块的count+1=2 由于F2为复制链接(只是个路径) 因此其信息始终和物理块一致  其count值也是2

删除硬链接F1之后，count--=1  

count=0才是文件删除

建立时:软链接 count不变  建立硬链接 count+1

删除时:count都会变 



检索目录(调入内存)时UNIX采用了文件名和其他信息分开的方法，其文件目录结构=文件名+索引结点编号，减少开销



## 32

设备分配的数据结构

设备标识通常是逻辑设备名-程序员系统调用

系统设备表SDT(整个系统就一张，记录连接到系统的设备): 设备类，设备标识符，DCT，驱动程序入口

| 设备控制表DCT          | 控制器控制表COCT             | 通道控制表CHCT           |
| ---------------------- | ---------------------------- | ------------------------ |
| 设备标识符号：deviceid | 控制器标识符号：controllerid | 通道标识符：channelid    |
| 设备状态               | 控制器状态                   | 通道状态                 |
| 指向控制表的指针       | 与控制器相连接的通道表指针   | 与通道连接的控制器表首址 |
| 重复执行次数或时间     | 控制器队列的队首指针         | 通道队列的队首指针       |
| 设备队列的队首指针     | 控制器队列的队尾指针         | 通道队列的队尾指针       |
| 设备类型type           |                              |                          |



# 2010

## 23

操作系统的主要有命令接口和程序接口(系统调用)

库函数属于用户程序，是系统调用的上层

## 24

创建进程的主要原因：

1. 用户登入系统
2. 高级调度
3. 系统处理用户程序的请求
4. 用户进程的进程请求

>  用户是绝对不能直接创建进程的

## 25

信号量表示可用资源个数，K<0,|K|表示等待资源的进程个数

## 26



## 27

互斥基本准则：

1. 空闲让进
2. 忙则等待
3. 有限等待
4. 让权等待

实现临界区互斥的基本方法

软件：

| 方法       | 单标志法                                                     | 双标志先检查法                                               | 双标志后检查法               | Peterson算法   |
| ---------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ---------------------------- | -------------- |
| 关键点     | turn=0/1 进入                                                | 设置while(flag[i]=T/F);                                      | 把自己设置成flag=True        | 用了flag和turn |
| 违反了什么 | 只能交替进入，如果一个进程不访问了，另一个也不能访问，违反了空闲让进 | 检查对方是否使用,如果同时进的话，就会争抢临界区，违反了忙则等待 | 这样会相互谦让，导致饿死现象 | 很好           |

硬件：(没有理解)

1. 中断屏蔽方法-关中断
2. 硬件指令方法
   - TestAndSet-原子操作
   - Swap

## 28

连续分配管理方式

1. 单一连续分配

   - 系统区
   - 用户区

2. 固定分区分配

   - 分区大小相等
   - 分区大小不等

3. 动态分配分区

   |      | 首次适应 | 邻近适应                     | 最佳适应         | 最坏适应 |
   | ---- | -------- | ---------------------------- | ---------------- | -------- |
   | 方法 | 地址递增 | 地址递增(从上次查找地方开始) | 容量递增         | 容量递减 |
   |      |          | 比首次还查                   | 产生最多外部碎片 |          |

   相邻的空闲区要合并

非连续分配-分段分页段页

## 29

注意点:一页2^9项，也就是需要需要9为表示页号

26-10-9=7

2^7=128

## 30

索引表可以表示256B/4B=2^6

(4+2\*64+64\*64)\*256B=1057KB

## 31

减少磁盘读写次数:

1. 设置当前目录
2. 设置索引结点

## 32

键盘是IO设备，首先要通过中断程序响应再处理数据





# 2011

## 23

缺页在用户态，缺页处理在内核态

## 24

中断处理和子程序调用？

## 25

虚拟存储只能基于非连续分配，这样才能灵活调入

## 26

用户级IO 设备无关软件，设备驱动程序，中断处理程序

## 27

## 28

## 29

## 30

## 31

## 32

# 2012

## 23

## 24

## 25

## 26

## 27

## 28

## 29

## 30

## 31

## 32

# 2013

## 23

![image-20231106161948923](images/image-20231106161948923.png)



## 24

> 使用ROM存储，不需要扩展，因此连续结构比起索引结构更快，索引结构需要查表
>
> 文件的物理结构：连续、链式、索引

![image-20231106162211335](images/image-20231106162211335.png)



## 25

> IO层次结构
>
> 用户层IO软件-->设备独立软件(系统调用处理程序)-->设备驱动程序-->中断处理程序-->硬件
>
> 设备驱动程序将物理号翻译成使用的形式

![image-20231106162546744](images/image-20231106162546744.png)

## 26

> 每个文件对应一个索引结点，单个文件大小与此无关

![image-20231106162919409](images/image-20231106162919409.png)

![image-20231106162948206](images/image-20231106162948206.png)



## 27

![image-20231106163426158](images/image-20231106163426158.png)



## 28

![image-20231106163558564](images/image-20231106163558564.png)



## 29

> 裸机只用ROM有数据，因此BIOS必定在ROM中
>
> 进入BIOS系统，安装操作系统到硬盘，一般是C盘，然后把操作系统相关数据加载RAM(内存条))才能被CPU运行

![image-20231106163845411](images/image-20231106163845411.png)



## 30

> 查询页表前就进行了越界判断

![image-20231106164349796](images/image-20231106164349796.png)



## 31

![image-20231106164607445](images/image-20231106164607445.png)

![image-20231106164635401](images/image-20231106164635401.png)

![image-20231106164754049](images/image-20231106164754049.png)



## 32

![image-20231106165051007](images/image-20231106165051007.png)



# 2014

## 23

## 24

## 25

## 26

## 27

## 28

## 29

## 30

## 31

## 32

# 2015

## 23

![image-20231113211434087](images/image-20231113211434087.png)

只有故障可以返回，而终止不会返回继续执行

## 24

> 寄存器如果不保持，其他程序运行的时候会覆盖
>
> PC是必须保存的 
>
> 而快表和cache本身就是临时的，无需保存

![image-20231113211808584](images/image-20231113211808584.png)

## 25

![image-20231113212156900](images/image-20231113212156900.png)



## 26

> AB 都需要申请资源，因此为阻塞态 C IO设备启动很慢，需要等待，因此会先到阻塞态

![image-20231113212532471](images/image-20231113212532471.png)



## 27

> 死锁的三类：
>
> - 预防死锁 - 四个条件
>
>   ![image-20231113215216354](images/image-20231113215216354.png)
>
>   
>
> - 避免死锁 - 银行家算法
>
> - 死锁检测和解除 - 检测

![image-20231113212906301](images/image-20231113212906301.png)



## 28

![image-20231113213132049](images/image-20231113213132049.png)

**直接在从最后往前推，找到第四个不同的进行替换**

## 29

![image-20231113213426306](images/image-20231113213426306.png)



## 30

![image-20231113213559152](images/image-20231113213559152.png)

## 31

> 固定：每个进程固定页框数
>
> 局部置换:在自己分配的固定页框里面置换页面，而全局回去别的页框置换，被置换后+1或-1，导致页框数改变，因此固定分配天然不能全局置换

![image-20231113213815066](images/image-20231113213815066.png)





## 32

![image-20231113214127327](images/image-20231113214127327.png)

位图法每一个比特对应一块磁盘，故一个磁盘可以表示的磁盘为1024*8=8192

409613%8192=50....13

故32+50-1=81 ，然后多余的13块在一个磁盘，也就是82号,由于是块内字节序号，也就是在第二个字节，从0开始编号就是1

> 注意要求块数的时候，因为从0开始编号，所以有409613块

# 2016

## 23

## 24

## 25

## 26

## 27

## 28

## 29

## 30

## 31

## 32

# 2017

## 23

## 24

## 25

## 26

## 27

## 28

## 29

## 30

## 31

## 32

# 2018

## 23

## 24

## 25

## 26

## 27

## 28

## 29

## 30

## 31

## 32

# 2019

## 23

## 24

## 25

## 26

## 27

## 28

## 29

## 30

## 31

## 32

# 2020

## 23

## 24

## 25

## 26

## 27

## 28

## 29

## 30

## 31

## 32

# 2021

## 23

## 24

## 25

## 26

## 27

## 28

## 29

## 30

## 31

## 32

# 2022

## 23

## 24

## 25

## 26

## 27

## 28

## 29

## 30

## 31

## 32

# 2023

## 23

## 24

## 25

## 26

## 27

## 28

## 29

## 30

## 31

## 32

# 冲刺

## 23

## 24

## 25

## 26

## 27

## 28

## 29

## 30

## 31

## 32

